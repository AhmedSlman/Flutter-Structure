# ğŸ’¬ Chat Brick | Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø´Ø§Øª

Complete standalone chat module with real-time messaging, voice, video calls, and location sharing for Flutter applications using Mason.

Ù†Ù…ÙˆØ°Ø¬ Ø´Ø§Øª ÙƒØ§Ù…Ù„ Ù…Ø¹ Ø±Ø³Ø§Ø¦Ù„ ÙÙˆØ±ÙŠØ©ØŒ ØµÙˆØªØŒ Ù…ÙƒØ§Ù„Ù…Ø§Øª ÙÙŠØ¯ÙŠÙˆØŒ ÙˆÙ…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Flutter Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Mason.

---

## âœ¨ Features | Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª

### ğŸ¯ Core Features | Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

- âœ… **Real-time Messaging** - Ø±Ø³Ø§Ø¦Ù„ ÙÙˆØ±ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Pusher
- âœ… **Text Messages** - Ø±Ø³Ø§Ø¦Ù„ Ù†ØµÙŠØ©
- âœ… **Image Sharing** - Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØµÙˆØ±
- âœ… **Voice Messages** - Ø±Ø³Ø§Ø¦Ù„ ØµÙˆØªÙŠØ© Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„ØªØ´ØºÙŠÙ„
- âœ… **Video Calls** - Ù…ÙƒØ§Ù„Ù…Ø§Øª ÙÙŠØ¯ÙŠÙˆ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Agora
- âœ… **Location Sharing** - Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ù…Ø¹ Ø®Ø±Ø§Ø¦Ø· Google
- âœ… **File Sharing** - Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù„ÙØ§Øª (PDF, Documents)
- âœ… **Chat Bot** - Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¹ Ø§Ù„Ø¨ÙˆØª
- âœ… **Pagination** - ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø´ÙƒÙ„ ØªØ¯Ø±ÙŠØ¬ÙŠ
- âœ… **Multi-language** - Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©

### ğŸ¨ UI Features | Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©

- âœ… **Modern UI** - ÙˆØ§Ø¬Ù‡Ø© Ø¹ØµØ±ÙŠØ© ÙˆØ³Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
- âœ… **Message Bubbles** - ÙÙ‚Ø§Ø¹Ø§Øª Ø±Ø³Ø§Ø¦Ù„ Ù…Ù…ÙŠØ²Ø©
- âœ… **Emoji Picker** - Ù„ÙˆØ­Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
- âœ… **Voice Player** - Ù…Ø´ØºÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØµÙˆØªÙŠØ©
- âœ… **Image Viewer** - Ø¹Ø§Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø¨Ø§Ù„ØªÙƒØ¨ÙŠØ± ÙˆØ§Ù„ØªØµØºÙŠØ±
- âœ… **Empty States** - Ø­Ø§Ù„Ø§Øª ÙØ§Ø±ØºØ© Ø¬Ù…ÙŠÙ„Ø©
- âœ… **Loading States** - Ø­Ø§Ù„Ø§Øª ØªØ­Ù…ÙŠÙ„ Ø³Ù„Ø³Ø©

---

## ğŸ“‹ What's Included | Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

This brick generates 3 complete features:

### 1ï¸âƒ£ Chats Feature (Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª)

```
lib/features/chats/
â”œâ”€â”€ cubit/
â”‚   â”œâ”€â”€ chats_cubit.dart
â”‚   â””â”€â”€ chats_states.dart
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ model/chats_model.dart
â”‚   â”œâ”€â”€ repository/repository.dart
â”‚   â””â”€â”€ request/chats_request.dart
â””â”€â”€ presentation/
    â”œâ”€â”€ screens/chats_screen.dart
    â””â”€â”€ widgets/widgets.dart
```

### 2ï¸âƒ£ Chat Feature (Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„ÙØ±Ø¯ÙŠØ©)

```
lib/features/chat/
â”œâ”€â”€ cubit/
â”‚   â”œâ”€â”€ chat_cubit.dart
â”‚   â””â”€â”€ chat_states.dart
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ model/chat_model.dart
â”‚   â”œâ”€â”€ repository/repository.dart
â”‚   â””â”€â”€ request/chat_request.dart
â””â”€â”€ presentation/
    â”œâ”€â”€ screens/
    â”‚   â”œâ”€â”€ chat_screen.dart
    â”‚   â”œâ”€â”€ full_image_chat.dart
    â”‚   â””â”€â”€ video_call_screen.dart
    â””â”€â”€ widgets/
        â”œâ”€â”€ chat_app_bar.dart
        â”œâ”€â”€ chat_input_bar.dart
        â”œâ”€â”€ message_bubble.dart
        â”œâ”€â”€ voice_player_widget.dart
        â”œâ”€â”€ voice_recorder_widget.dart
        â”œâ”€â”€ static_map.dart
        â””â”€â”€ attachment_options_sheet.dart
```

### 3ï¸âƒ£ Chat Bot Feature (Ø§Ù„Ø¨ÙˆØª)

```
lib/features/chat_bot/
â”œâ”€â”€ cubit/
â”œâ”€â”€ domain/
â””â”€â”€ presentation/
```

---

## ğŸš€ Quick Start | Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹

### Prerequisites | Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª

1. **Mason CLI installed** - ØªØ«Ø¨ÙŠØª Mason

   ```bash
   dart pub global activate mason_cli
   ```

2. **Project Template brick** - Ù‚Ø§Ù„Ø¨ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
   ```bash
   mason make project_template -o ./lib
   ```

### Installation | Ø§Ù„ØªØ«Ø¨ÙŠØª

1. **Add to mason.yaml**:

   ```yaml
   bricks:
     chat:
       path: ./bricks/chat
   ```

2. **Get the brick**:

   ```bash
   mason get
   ```

3. **Generate the module**:

   ```bash
   mason make chat -o ./lib/features
   ```

4. **Follow the prompts**:
   - Base URL: `https://your-api.com/api/`
   - Pusher API Key: `your_pusher_key`
   - Pusher Cluster: `eu`
   - Pusher Auth URL: `https://your-api.com/api/broadcasting/auth`
   - Google Maps API Key: `your_google_maps_key`
   - Add to Router: `Y`
   - Register Repositories: `Y`

---

## âš™ï¸ Configuration | Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

### 1ï¸âƒ£ Pusher Setup

The brick uses Mason variables for Pusher configuration. During generation, you'll be asked for:

- **Pusher API Key** - Ù…Ù† Pusher Dashboard
- **Pusher Cluster** - Ù…Ø«Ù„ `eu`, `us2`, etc.
- **Pusher Auth URL** - Backend endpoint Ù„Ù„Ù…ØµØ§Ø¯Ù‚Ø©

These will be automatically inserted in `chat/cubit/chat_cubit.dart`.

### 2ï¸âƒ£ Google Maps Setup

You'll be asked for your **Google Maps API Key** during generation. This will be inserted in:

- `chat/presentation/widgets/static_map.dart`

**Don't forget to also add it to:**

- `android/app/src/main/AndroidManifest.xml`
- `ios/Runner/Info.plist`

### 3ï¸âƒ£ Firebase Setup

Add your Firebase configuration files:

- Android: `android/app/google-services.json`
- iOS: `ios/Runner/GoogleService-Info.plist`

### 4ï¸âƒ£ Base URL

Set your API base URL in `lib/core/config/key.dart`:

```dart
static const String baseUrl = 'https://your-api.com/api/';
```

---

## ğŸ“¦ Dependencies | Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯Ø§Øª

See [DEPENDENCIES.md](DEPENDENCIES.md) for:

- Complete list of required packages
- Platform-specific configurations
- Required project structure
- Setup instructions

---

## ğŸ¯ Usage | Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Navigate to Chats Screen

```dart
Navigator.pushNamed(context, Routes.chatsScreen);
```

### Navigate to Chat Screen

```dart
Navigator.pushNamed(
  context,
  Routes.chatScreen,
  arguments: ChatArgs(
    chatId: "123",
    name: "Company Name",
    image: "https://example.com/image.jpg",
  ),
);
```

### Start Video Call

```dart
Navigator.pushNamed(
  context,
  Routes.videoCallScreen,
  arguments: VideoCallArgs(
    channelName: "room_123",
    token: "agora_token",
    uid: 12345,
  ),
);
```

---

## ğŸ”§ Customization | Ø§Ù„ØªØ®ØµÙŠØµ

### Change Colors

Update theme in `lib/core/theme/`:

- `light_theme.dart`
- `dark_theme.dart`

### Change Strings

Update translations in:

- `assets/translations/ar-EG.json`
- `assets/translations/en-US.json`

### Modify UI

All widgets are in:

- `chat/presentation/widgets/`
- `chats/presentation/widgets/`

---

## ğŸ› Troubleshooting | Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

### "Pusher not connecting"

- âœ… Check API Key and Cluster
- âœ… Verify auth URL is correct
- âœ… Ensure token is set in Utils.token

### "Maps not showing"

- âœ… Add Google Maps API key in all 3 locations
- âœ… Enable Maps SDK in Google Cloud Console

### "Permissions denied"

- âœ… Add all required permissions in AndroidManifest.xml
- âœ… Add usage descriptions in Info.plist

### "Package not found"

- âœ… Run `flutter pub get`
- âœ… Check all dependencies in pubspec.yaml

---

## ğŸ“š API Endpoints Required | Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

Your backend must have:

```
GET  /api/chats/my-chats              - Get chats list
GET  /api/chats/messages              - Get chat messages
POST /api/chats/send-message          - Send message
POST /api/chats/send-location         - Send location
POST /api/agora/token                 - Get Agora token
POST /api/broadcasting/auth           - Pusher authentication
```

---

## ğŸ¤ Contributing | Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©

This brick is part of the flutter-structure project. For improvements:

1. Fork the repository
2. Make your changes
3. Submit a pull request

---

## ğŸ“„ License | Ø§Ù„ØªØ±Ø®ÙŠØµ

MIT License - See LICENSE file for details

---

## ğŸ†˜ Support | Ø§Ù„Ø¯Ø¹Ù…

For issues or questions:

- Check DEPENDENCIES.md
- Review troubleshooting section
- Open an issue on GitHub

---

**Made with â¤ï¸ for the Flutter community**

**ØµÙÙ†Ø¹ Ø¨Ù€ â¤ï¸ Ù„Ù…Ø¬ØªÙ…Ø¹ Flutter**
